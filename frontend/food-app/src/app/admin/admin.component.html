<div class="admin-panel">
    <h1>Admin dashboard</h1>
    <div class="products-panel">
        <h3 class="products-heading">Products</h3>
        <div class="products-head">
            <div>Title</div>
            <div>Price</div>
            <div>&nbsp;</div>
            <div>&nbsp;</div>
            <!-- <div>&nbsp;</div> -->
            
        </div>
        <div class="products">
            @for (item of products; track $index) {
                <div class="product">
                    <div>{{ item.title }}</div>
                    <div>{{ item.price }}</div>
                    <div><button class="modify" (click)="modifyProduct(item)">Modify</button></div>
                    <div><button class="delete" (click)="showDeletePrompt(item._id, item.title)">Delete</button></div>
                    <!-- <div><button class="more">More</button></div> -->
                </div>
            }
            <div class="product add-product" (click)="showAddProduct($event)">
                <div>
                    +&nbsp;Add product
                </div>
            </div>
        </div>
    </div>
    <div class="bg" [ngStyle]="{display: bgShow}" (click)="abortAdding($event)"></div>
    <div class="add-product-div" [ngStyle]="{display: addShow}">
        <h3 class="add-head">Add product</h3>
        <form class="add-product-form" (submit)="addProduct($event)">
            <label for="title">Title</label>
            <input type="text" name="title" id="title" placeholder="Title">
            <label for="price">Price (USD)</label>
            <input type="number" min="0" name="price" id="price" placeholder="Price">
            <label for="description">Description</label>
            <input type="text" name="description" id="description" placeholder="Description">
            <p class="error-p">{{ error }}</p>
            <input type="submit" value="Add Product">
            <p class="success" [ngStyle]="{display: successMsg}">Product was added successfully</p>
        </form>
    </div>

    <div class="add-product-div" [ngStyle]="{display: modifyShow}">
        <h3 class="add-head">Modify product</h3>
        <form class="add-product-form" (submit)="updateProduct($event)">
            <label for="title">Title</label>
            <input type="text" name="title" id="title" [value]="product.title">
            <label for="price">Price (USD)</label>
            <input type="number" min="0" name="price" id="price" [value]="product.price">
            <label for="description">Description</label>
            <input type="text" name="description" id="description" [value]="product.description">
            <p class="error-p">{{ modifyError }}</p>
            <input type="submit" value="Update">
            <p class="success" [ngStyle]="{display: modifySuccessMsg}">Product was updated successfully</p>
        </form>
    </div>

    <div class="delete-prompt" [ngStyle]="{display: deletePromptShow}">
        <h2>Are you sure?</h2>
        <p>Do you want to delete product with name: {{ productName }}&nbsp;?</p>
        <div class="delete-btns">
            <button class="close-btn" (click)="abortAdding($event)">Close</button>
            <button class="delete-btn" (click)="deleteProduct()">Delete</button>
        </div>
    </div>
</div>